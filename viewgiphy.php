<!DOCTYPE HTML>

<html>

<head>
	<script>
		if (document.location.href.indexOf("perisic.com") > 0) {
			document.location.href = "https://cat.sanfoh.com/"
		}
	</script>
	<title>Fifty Shades of Cats</title>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<style>
		body {
			background-color: #8c7D70;
			overflow: hidden;

			
		}

		.bg { 
background-image: url("data:image/png;base64,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");

		}

		.img1 {
			float: left;
			margin-right: 15px;
			width: 80px;
			height: 60px;
		}


		#delta {
			position: absolute;
			left: 0px;
			top: 0px;
			z-index: 2;
			color: yellow;
			background-color: black;
			opacity: 0.8;
		}

		#err {
			position: absolute;
			left: 0px;
			top: 50px;
			z-index: 2;
			color: red;
			background-color: black;
			display: none;
			opacity: 0.8;
		}

		#ontop {
			position: absolute;
			left: 0px;
			top: 0px;
			z-index: 1;
			color: yellow;
			background-color: black;
			opacity: 0.5;
		}

		.statsframe {
			width: 50vw;
			position: absolute;
			min-height: 380px;
			overflow: hidden;
			z-index: 5;
		}

		.dropdown {

			position: absolute;
			display: inline-block;
		}

		.dropdown-content {
			border-radius: 5px;
			display: none;
			position: absolute;
			background-color:whitesmoke;
			width: 62vw;
			min-width: 80px;
			box-shadow: 20px 20px 10px rgba(50, 50, 0, 0.7);
			padding: 0px 10px;
			z-index: 2;
			left: 10%;
		}

		.dropdown:hover .dropdown-content {
			display: block;
		}
	</style>
	<script>
		// https://stackoverflow.com/questions/22428484/get-element-from-point-when-you-have-overlapping-elements
		var catqueue = [];
		var n_uid = 10000;

		function getRandomInt(min, max) {
			min = Math.ceil(min);
			max = Math.floor(max);
			if (min > max) {
				return min;
			}
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}


		async function remove_video(n = -1) {
			addLI("ontop", "remove video called n=" + n);
			if (n > 0) {
				var a = document.getElementById("i" + n);
				if (a != null) {
					a.parentNode.removeChild(a);
				}
				delete a;
				return;
			}
			for (i = catqueue.length; i > 0; i--) {
				var nn = catqueue.shift();
				var a = document.getElementById("i" + nn);
				if (a != null) {
					a.parentNode.removeChild(a);
					delete a;
					return;
				}
			}

			var videos = document.getElementsByTagName('video');

			idx = Math.floor(Math.random() * videos.length);

			if (videos.length > 2) {
				var a = videos[idx];
				a.parentNode.removeChild(a);
				delete a;
				delete videos;
			}
		}
		var errcount = 1;

		function srcError(str, n) {
			remove_video(parseInt(n, 10));
			document.getElementById('err').innerHTML = errcount;
			errcount++;
			if (document.getElementsByTagName('video').length < 2 && errcount > 10) {
				window.location.href = "viewgiphy.php?t=" + n;
			}
			//alert("SRC ERROR: "+str+" n="+n); 

		}
		async function add_video() {
			// console.log("Hello"); 
			addLI("ontop", "add_video() called: ");
			var ww = window.innerWidth;
			var wh = window.innerHeight;

			var w = getRandomInt(200, 480);
			var h = Math.floor(w * 36.0 / 48.0);

			var ax = getRandomInt(ww / 2 - 1, ww / 2 + 1);
			var ay = getRandomInt(wh / 2 - 1, wh / 2 + 1);
			var d = 25;
			iw = ww / 2;
			ih = wh / 2;
			var r = 0.1;
			for (i = 98;; i--) {
				var elem = document.elementFromPoint(ax, ay);
				var item = (elem == null ? "VIDEO" : elem.tagName);
				var elemA = document.elementFromPoint(ax + d, ay + d);
				var itemA = (elemA == null ? "VIDEO" : elemA.tagName);
				var elemB = document.elementFromPoint(ax - d, ay - d);
				var itemB = (elemB == null ? "VIDEO" : elemB.tagName);

				if (item == "VIDEO" || itemA == "VIDEO" || itemB == "VIDEO") {
					if (i <= 0) {
						addLI("ontop", "no space found");
						return;
					}
					var ax = getRandomInt(0 + iw, ww - iw);
					iw = ww / 2 * i / 100;
					var ay = getRandomInt(0 + ih, wh - ih);
					ih = wh / 2 * i / 100;

				} else {
					// console.log("ax="+ax+"; ay="+ay); 
					break;
				}
			}

			var px = Math.floor(100 * ax / ww);
			var py = Math.floor(100 * ay / wh);
			addLI("ontop", "px=" + px + "; py=" + py);
			var v = document.createElement("video");
			v.setAttribute("autoplay", "");
			v.setAttribute("loop", "");
			v.setAttribute("width", w);
			v.setAttribute("height", h);
			v.setAttribute("muted", "");
			n = n_uid++; // getRandomInt(10001, 99999); 
			v.setAttribute("id", "i" + n);
			v.setAttribute("onmouseenter", "change_video(" + n + ")");
			var styleinfo = "margin:0;padding:0; position: absolute; left: " + px + "%; top: " + py + "%; transform: translate(-50%, -50%); ";

			v.setAttribute("style", styleinfo);


			var src = document.createElement("source");
			const randomUid = uids[Math.floor(Math.random() * uids.length)];
			// var x = "kyLUECfmwz4rlwOLfp";
			var x = randomUid;
			src.setAttribute("src", "https://media.giphy.com/media/" + x + "/giphy.mp4");
			src.setAttribute("type", "video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"");
			src.setAttribute("onerror", "srcError('s'," + n + ")");
			v.appendChild(src);
			v.setAttribute("onerror", "srcError('v'," + n + ")");

			var element = document.getElementById("bd");
			if (delta_time < 50 || document.getElementsByTagName('video').length < 4) {
				element.appendChild(v);
				catqueue.push(n);
				addLI("ontop", "cat ok delta=" + delta_time);

			} else {
				console.log("(a) delta=" + delta_time);
				addLI("ontop", "not added delta=" + delta_time);
				delete v;
				delete src;
			}
		}

		var startup = 5;

		function change_video(n = -1) {
			if (startup > 0) {
				startup--;
			} else {
				remove_video(n);
			}
			if (delta_time < 10) {
				var t = setTimeout('add_video()', 2000);
				var t1 = setTimeout('add_video()', 8000);
				// console.log("t="+t+" t1="+t1); 
			} else {
				console.log("(b) delta=" + delta_time);
			}
		}
		/**
		 * Can use this for debugging. 
		 */
		function addLI(listId, what, maxNumber = 50) {
			return;
			/*
						var newItem = document.createElement("LI");
						var txt = document.createTextNode(what);
						newItem.appendChild(txt);

						var listOfItems = document.getElementById(listId);
						if (listOfItems == null) {
							document.getElementById("info6").innerHTML = "listId=" + listId + " for:" + what;

						} else {
							listOfItems.insertBefore(newItem, listOfItems.childNodes[0]);

							// remove: 
							var theItems = document.getElementById(listId);
							var numberofchildren = theItems.children.length;
							for (i = maxNumber; i < numberofchildren; i++) {
								try {
									theItems.removeChild(theItems.children[i]);
								} catch (e) {
									document.getElementById('info8').innerHTML = "addLI error. e=" + e + ' at ' + getTimeNow();
								}
							}
						}
						*/
		}

		var last_time = Date.now()
		var delta_time = 0;
		var checkTime = setInterval('check_time()', 5000);
		var checkDelta = setTimeout('check_delta()', 50);

		function check_time() {

			if (delta_time > 20 || delta_time < 10) {
				change_video();
			}
		}

		function check_delta() {
			delta_time = Math.abs(Date.now() - last_time - 50);
			last_time = Date.now();
			document.getElementById('delta').innerHTML = document.getElementsByTagName('video').length;
			checkDelta = setTimeout('check_delta()', 50);
		}

		function showinfo() {
			document.getElementById("statsframe").src = "viewgiphy_h.php?b=1";

		}
	</script>
</head>

<body id="bd" class="bg" onclick="change_video()">
	<ol id="ontop"></ol>
	<div class="dropdown">
		<a href="viewgiphy_h.php">
			<h1 id="delta" title="Click for more information." onmouseover="showinfo()">.</h1>
		</a>
		<div id="myDropdown" class="dropdown-content">
			<!-- <iframe id="statsframe" class="statsframe" src="index.php?time=1590796951&showstats&id=1"></iframe> -->
			<p><a href="viewgiphy.php"><span class="img1 bg" src="bg1.jpg" alt="no cat" title="Picture with no cat"></span></a>
				<h1>What is this about?</h1>
				It is well known that the main purpose of the Internet in general and the World Wide Web in particular is the consumption of cat themed videos.
				This site provides the opportunity to test the capabilities of your software device in relation to showing videos of cats. 
				The higher the score the better. On a decent system  you should get a score of at least 50.

				<p>The videos were made as animted gifs using the <a href="https://github.com/marcconrad/myCCTV" target="_blank">myCTTV</a> software
					and then uploaded to <a href="https://giphy.com/channel/sanfoh" target="_blank">Giphy</a></p>

				<p><em> This is a piece of art and no warranty is implied. </em>
				</p>
				<p>

				</p>
			</p>
			<hr>
			<em>&copy; <a href="http://dr.marcconrad.com/" target="_blank">Marc Conrad, 2020</a></em>
			<br>
			<br>
		</div>

	</div>

	<h1 id="err">.</h1>
	<script>
		// var intv = setInterval('change_video()', 60000); 


		// var av = add_video(); 
		<?php
		$html5links = array(

			"https://media.giphy.com/media/gdeobe2eouDgyzFCk6/giphy.gif",
			"https://media.giphy.com/media/Xf7j7HNc1XkDX6cocF/giphy.gif",
			"https://media.giphy.com/media/QBde0ttwmO8uJyQDQC/giphy.gif",
			"https://media.giphy.com/media/iGGUiv0GdHUYCxvlkp/giphy.gif",
			"https://media.giphy.com/media/frSHThI3S3UCliYwRu/giphy.gif",
			"https://media.giphy.com/media/eNeOthF9WnoXNeLhNC/giphy.gif",
			"https://media.giphy.com/media/W5qpwq4xhN6zzSABtz/giphy.gif",
			"https://media.giphy.com/media/JSXo9Qsqp1kayubdAp/giphy.gif",
			"https://media.giphy.com/media/RNQFn8zlgnEPvQC7Z3/giphy.gif",
			"https://media.giphy.com/media/iDCUJkp5J20YXP4MV0/giphy.gif",
			"https://media.giphy.com/media/TIjfQvCgyXmWEpBONN/giphy.gif",
			"https://media.giphy.com/media/MdFTcBRChDsDy68mOJ/giphy.gif",
			"https://media.giphy.com/media/IdxQaL4g195OAqTtsK/giphy.gif",
			"https://media.giphy.com/media/XHRbpCvNjXPDWTpphC/giphy.gif",
			"https://media.giphy.com/media/hWkA8lBZjsMvR8I7F4/giphy.gif",
			"https://media.giphy.com/media/jokvxpoS0xgSCXQ6r0/giphy.gif",
			"https://media.giphy.com/media/kyLlRt3tBhRCV4yLML/giphy.gif",
			"https://media.giphy.com/media/JTngTKSIZ6y0NWLQzr/giphy.gif",
			"https://media.giphy.com/media/S72RQMAh0L9HlizIHV/giphy.gif",
			"https://media.giphy.com/media/YTEMCyX1EA3pNvTDer/giphy.gif",
			"https://media.giphy.com/media/kyLUECfmwz4rlwOLfp/giphy.gif",
			"https://media.giphy.com/media/LqlLTridibty7bcOaf/giphy.gif",
			"https://media.giphy.com/media/WTF2F1tzBKxZxwaACr/giphy.gif",
			"https://media.giphy.com/media/Pja6z2Req7oTC5quhF/giphy.gif",
			"https://media.giphy.com/media/YMdgBVNqktCrASehJQ/giphy.gif",
			"https://media.giphy.com/media/jnEa83x730avhq0Fm7/giphy.gif",
			"https://media.giphy.com/media/l3PQBGu03DcPpFW3ft/giphy.gif",
			"https://media.giphy.com/media/huJWfpNtFXMVgdC946/giphy.gif",
			"https://media.giphy.com/media/YOeE3BcwImzlN2rGPi/giphy.gif",
			"https://media.giphy.com/media/j3o5cUsZooCVEOVulG/giphy.gif",
			"https://media.giphy.com/media/H1kxaXau1C0mUd5pvb/giphy.gif",
			"https://media.giphy.com/media/S5Q7M9ySqkN9Oz6gkX/giphy.gif",
			"https://media.giphy.com/media/RjqeVMr2uHi7s9oeTZ/giphy.gif",
			"https://media.giphy.com/media/mBS2kBzDHTXCHumCCH/giphy.gif",
			"https://media.giphy.com/media/husFKD6jWPDksGllqD/giphy.gif",
			"https://media.giphy.com/media/iGAptXUZuT5587JzSF/giphy.gif",
			"https://media.giphy.com/media/kf8gwpektMvP3CKRRy/giphy.gif",


			"https://media.giphy.com/media/dxCikFrrVmoARNdfxu/giphy.gif",
			"https://media.giphy.com/media/Id09s09vdk7bJbPzWu/giphy.gif",
			"https://media.giphy.com/media/l3UBYJ5FRwfrdn7Yxy/giphy.gif",
			"https://media.giphy.com/media/kfXKWgt3cTdiReg4YA/giphy.gif",
			"https://media.giphy.com/media/UpDAYYUpeFnKD5uzUh/giphy.gif",
			"https://media.giphy.com/media/WQyAQz5HaPqGXAsDDS/giphy.gif",
			"https://media.giphy.com/media/Kan6WECiHQZ7Vva3he/giphy.gif",
			"https://media.giphy.com/media/kdRKljpbhbM3C40XBg/giphy.gif",
			"https://media.giphy.com/media/W5TX4uO4o7WcBdOWDI/giphy.gif",
			"https://media.giphy.com/media/IhVBZtaTMjwl7B5Ula/giphy.gif",
			"https://media.giphy.com/media/iFxda3M9gXg2vzpCyR/giphy.gif",
			"https://media.giphy.com/media/gFnXEiRTujnvJpKeX4/giphy.gif",
			"https://media.giphy.com/media/LoHuFX4cCA7PDrZg0Q/giphy.gif",
			"https://media.giphy.com/media/VEtMohE58xOc5vzgH9/giphy.gif",
			"https://media.giphy.com/media/hVgObftRmLdU0YsWQO/giphy.gif",
			"https://media.giphy.com/media/WoLuCNTDhgTk9gt3s6/giphy.gif",
			"https://media.giphy.com/media/TH09ceSR2FwDr3ADyw/giphy.gif",
			"https://media.giphy.com/media/XBXk0Bd4aOiheEPong/giphy.gif",
			"https://media.giphy.com/media/kcrBFg1Y6VTNZYltYP/giphy.gif",
			"https://media.giphy.com/media/kC2l6VIYiOBfnNFFzu/giphy.gif",
			"https://media.giphy.com/media/JQFLhpFGlSHC8ffp0f/giphy.gif",
			"https://media.giphy.com/media/KxzBqIBxb73Xcf981F/giphy.gif",
			"https://media.giphy.com/media/RHPnEs1m0xPsVzw4o9/giphy.gif",
			"https://media.giphy.com/media/hpcUpadpwnSyHDdzUb/giphy.gif",
			"https://media.giphy.com/media/S5u3RUeEtCKi0cSl1q/giphy.gif",
			"https://media.giphy.com/media/QX1sVP0IWlN6qj6EWl/giphy.gif",
			"https://media.giphy.com/media/JsPnJDGU1W9XFZgTAD/giphy.gif",
			"https://media.giphy.com/media/VJCD7PpHym9DiNwUt8/giphy.gif",
			"https://media.giphy.com/media/Q7X93lW5AzUhYKsBCa/giphy.gif",
			"https://media.giphy.com/media/SRvk2IQQcnb2iQpLJy/giphy.gif",
			"https://media.giphy.com/media/fA7vaErxwy0iFiGx96/giphy.gif",
			"https://media.giphy.com/media/kEE985pTRXbSD56uuc/giphy.gif",
			"https://media.giphy.com/media/WQrOe3yJd2jeK8gTR3/giphy.gif",
			"https://media.giphy.com/media/YTEMCyX1EA3pNvTDer/giphy.gif",
			"https://media.giphy.com/media/kyLUECfmwz4rlwOLfp/giphy.gif",
			"https://media.giphy.com/media/YMdgBVNqktCrASehJQ/giphy.gif",
			"https://media.giphy.com/media/WTF2F1tzBKxZxwaACr/giphy.gif",
			"https://media.giphy.com/media/Pja6z2Req7oTC5quhF/giphy.gif",
			"https://media.giphy.com/media/huJWfpNtFXMVgdC946/giphy.gif",
			"https://media.giphy.com/media/jnEa83x730avhq0Fm7/giphy.gif",
			"https://media.giphy.com/media/l3PQBGu03DcPpFW3ft/giphy.gif",
			"https://media.giphy.com/media/j3o5cUsZooCVEOVulG/giphy.gif",
			"https://media.giphy.com/media/H1kxaXau1C0mUd5pvb/giphy.gif",
			"https://media.giphy.com/media/YOeE3BcwImzlN2rGPi/giphy.gif",

		);





		echo 'var uids = [ ';
		foreach ($html5links as $url) {
			$x = explode("/", $url)[4];
			echo '"' . $x . '", ';
		}
		echo ' ]; ';

		?>
	</script>

	<?php


	$w = 48;
	$h = 36;


	echo '<script>';
	for ($i = 0; $i < 50; $i++) {

		echo 'var a' . $i . ' = setTimeout(\'add_video()\', 500 * ' . $i . '); ';
	}
	echo '</script>';
	?>



</html>